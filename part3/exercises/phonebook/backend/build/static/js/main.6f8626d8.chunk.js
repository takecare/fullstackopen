(this.webpackJsonpexercises=this.webpackJsonpexercises||[]).push([[0],{15:function(e,n,t){e.exports=t(42)},20:function(e,n,t){},38:function(e,n,t){},39:function(e,n,t){},40:function(e,n,t){},41:function(e,n,t){},42:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),c=t(14),o=t.n(c),u=(t(20),t(3)),i=t(2),l=t(4),m=t.n(l),f="/api/persons",s=function(e){return new Promise((function(n,t){m.a.post(f,e).then((function(e){return n(e.data)})).catch((function(e){return t(e)}))}))},d=function(e){var n=m.a.get("".concat(f,"/").concat(e||""));return new Promise((function(e,t){n.then((function(n){return e(n.data)})).catch((function(e){return t(e)}))}))},b=function(e){return new Promise((function(n,t){m.a.put("".concat(f,"/").concat(e.id),e).then((function(e){return n(e.data)})).catch((function(e){return t(e)}))}))},h=function(e){return new Promise((function(n,t){m.a.delete("".concat(f,"/").concat(e)).then((function(e){return n(e.data)})).catch((function(e){return t(e)}))}))},E=(t(38),function(e){var n=e.filter,t=e.handleChange;return r.a.createElement("div",{className:"filter"},r.a.createElement("input",{value:n,onChange:t}))}),v=(t(39),function(e){var n=e.name,t=e.number,a=e.handleNameChange,c=e.handleNumberChange,o=e.addNumber;return r.a.createElement(r.a.Fragment,null,r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),o()}},r.a.createElement("div",{className:"numberform"},r.a.createElement("label",{htmlFor:"name"},"Name:"),r.a.createElement("input",{id:"name",className:"leading",value:n,onChange:a}),r.a.createElement("label",{htmlFor:"number"},"Number:"),r.a.createElement("input",{id:"number",value:t,onChange:c}),r.a.createElement("button",{type:"submit"},"add"))))}),p=(t(40),function(e){var n=e.persons,t=e.filter,a=e.onDelete,c=n.filter((function(e){return e.name.toLocaleLowerCase().includes(t.toLocaleLowerCase())}));return r.a.createElement("div",{className:"numbers"},r.a.createElement("ul",null,c.map((function(e){return r.a.createElement("li",{key:e.name},e.name,", ",e.number,r.a.createElement("button",{onClick:function(){return a(e.id)}},"delete"))}))))}),g=(t(41),function(e){var n=e.message,t=n.isError?"error":"message";return n.text?r.a.createElement("div",{className:"notification ".concat(t)},n.text):null}),j=function(){var e=Object(a.useState)([]),n=Object(i.a)(e,2),t=n[0],c=n[1],o=Object(a.useState)(""),l=Object(i.a)(o,2),m=l[0],f=l[1],j=Object(a.useState)(""),O=Object(i.a)(j,2),w=O[0],N=O[1],C=Object(a.useState)(""),x=Object(i.a)(C,2),S=x[0],F=x[1],k=Object(a.useState)({text:"",isError:!1}),P=Object(i.a)(k,2),y=P[0],D=P[1],L=Object(a.useState)(null),T=Object(i.a)(L,2),J=T[0],A=T[1];Object(a.useEffect)((function(){d().then((function(e){return c(e)})).catch((function(e){D({text:"Failed to load data.",isError:!0}),console.error(e)}))}),[]);var B=function(e){clearTimeout(J),D({text:e,isError:!1});var n=setTimeout((function(){A(null),D(Object(u.a)(Object(u.a)({},e),{},{text:null}))}),3e3);A(n)},I=function(e){clearTimeout(J),D({text:e,isError:!0});var n=setTimeout((function(){A(null),D(Object(u.a)(Object(u.a)({},e),{},{text:null}))}),3e3);A(n)};return r.a.createElement("div",{className:"app"},r.a.createElement("h2",null,"Phonebook"),r.a.createElement(g,{message:y}),r.a.createElement("h3",null,"Add new"),r.a.createElement(v,{name:m,number:w,handleNameChange:function(e){f(e.target.value)},handleNumberChange:function(e){N(e.target.value)},addNumber:function(){var e=t.find((function(e){return e.name===m}));e?window.confirm("".concat(m," is already on the phonebook. Replace with a new one?"))&&function(e){b(Object(u.a)(Object(u.a)({},e),{},{number:w})).then((function(n){c(t.map((function(t){return t.id===e.id?n:t}))),B("".concat(e.name,"'s number replaced.")),f(""),N("")})).catch((function(n){I("Failed to replace ".concat(e.name,"'s number.")),console.error(n)}))}(e):s({name:m,number:w}).then((function(e){c(t.concat(e)),f(""),N("")})).catch((function(e){I("Failed to add new number."),console.error(e)}))}}),r.a.createElement("h3",null,"Numbers"),r.a.createElement(E,{filter:S,handleChange:function(e){F(e.target.value)}}),r.a.createElement(p,{persons:t,filter:S,onDelete:function(e){var n=t.find((function(n){return n.id===e}));window.confirm("Delete ".concat(n.name,"?"))&&h(e).then((function(){c(t.filter((function(n){return n.id!==e}))),B("".concat(n.name," removed."))})).catch((function(e){I("Failed to remove ".concat(n.name,".")),console.error(e)}))}}))};o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(j,null)),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.6f8626d8.chunk.js.map